# üì± WhatsApp Multi Session Server

WhatsApp Multi Session Server ‚Äì —Ü–µ —Å–µ—Ä–≤–µ—Ä–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ –Ω–∞ Node.js, —è–∫–∏–π –∑–∞–±–µ–∑–ø–µ—á—É—î —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –∑ WhatsApp —á–µ—Ä–µ–∑ ASP.NET. –í—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–æ–¥—É–ª—ñ `express`, `whatsapp-web.js`, `node-fetch` —Ç–∞ –≤–ª–∞—Å–Ω–∏–π –ª–æ–≥–µ—Ä –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —Å–µ—Å—ñ–π, –æ–±–º—ñ–Ω—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏ —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è. –ü—Ä–æ–≥—Ä–∞–º–∞ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `.env`, –ø—ñ–¥—Ç—Ä–∏–º—É—î –∫—ñ–ª—å–∫–∞ –Ω–æ–º–µ—Ä—ñ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—ñ—Å–ª—è –∑–±–æ—ó–≤ —ñ —î —ñ–¥–µ–∞–ª—å–Ω–∏–º —Ä—ñ—à–µ–Ω–Ω—è–º –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –≤ –±—ñ–∑–Ω–µ—Å—ñ.

–ü—Ä–æ–≥—Ä–∞–º–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ WhatsApp —á–µ—Ä–µ–∑ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É `whatsapp-web.js`, –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏–π –æ–±–º—ñ–Ω –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏. –í–æ–Ω–∞ –∫–æ—Ä–∏—Å–Ω–∞ –¥–ª—è –±—ñ–∑–Ω–µ—Å—ñ–≤, —è–∫—ñ —Ö–æ—á—É—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É–≤–∞—Ç–∏ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –∫–ª—ñ—î–Ω—Ç–∞–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏, —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ CRM-—Å–∏—Å—Ç–µ–º–∞–º–∏ —Ç–∏–ø—É Bitrix –∞–±–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —á–∞—Ç-–±–æ—Ç—ñ–≤).

---

## üéØ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

–î–æ–¥–∞—Ç–æ–∫ –¥–æ–∑–≤–æ–ª—è—î:

1. **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Å—ñ—è–º–∏ WhatsApp**  
   - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –Ω–æ–º–µ—Ä–∞ —á–µ—Ä–µ–∑ –µ–Ω–¥–ø–æ—ñ–Ω—Ç `POST /registerwhatsapp` —ñ–∑ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—î—é QR-–∫–æ–¥—É –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó.  
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–µ—Å—ñ–π –¥–ª—è –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö –Ω–æ–º–µ—Ä—ñ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ —Å–µ—Ä–≤–µ—Ä–∞ (—á–µ—Ä–µ–∑ `fetchRegisteredPhones`).  
   - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É —Å–µ—Å—ñ—ó —á–µ—Ä–µ–∑ –µ–Ω–¥–ø–æ—ñ–Ω—Ç `GET /status/:phone`.  
   - –í–∏–¥–∞–ª–µ–Ω–Ω—è —Å–µ—Å—ñ—ó —Ç–∞ –ø–æ–≤‚Äô—è–∑–∞–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ —á–µ—Ä–µ–∑ –µ–Ω–¥–ø–æ—ñ–Ω—Ç `DELETE /sessiondelete/:phone`.

2. **–û–±–º—ñ–Ω –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏**  
   - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Ö—ñ–¥–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (—Ç–µ–∫—Å—Ç, –º–µ–¥—ñ–∞, —Ä–µ–∞–∫—Ü—ñ—ó) —á–µ—Ä–µ–∑ –ø–æ–¥—ñ—é `message` —É `whatsapp-web.js`. –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏—Ö —á–∞—Ç—ñ–≤ (`@c.us`). –ü–µ—Ä–µ–¥–∞—á–∞ –¥–æ ASP.NET —á–µ—Ä–µ–∑ –≤–µ–±—Ö—É–∫ `/whatsappwebhook`.  
   - –í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (—Ç–µ–∫—Å—Ç –∞–±–æ –º–µ–¥—ñ–∞, –¥–æ 16 –ú–ë) –≤—ñ–¥ —ñ–º–µ–Ω—ñ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ —á–µ—Ä–µ–∑ –µ–Ω–¥–ø–æ—ñ–Ω—Ç `POST /sendmsg`.

3. **–õ–æ–≥—É–≤–∞–Ω–Ω—è**  
   - –ó–∞–ø–∏—Å —É—Å—ñ—Ö –ø–æ–¥—ñ–π (—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è, –ø–æ–º–∏–ª–∫–∏, —É—Å–ø—ñ—Ö–∏) —É —Ñ–∞–π–ª–∏ –ª–æ–≥—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `2025-05-24.log`).  
   - –í–∏–≤–µ–¥–µ–Ω–Ω—è –ª–æ–≥—ñ–≤ —É –∫–æ–Ω—Å–æ–ª—å —ñ–∑ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è–º.

4. **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è**  
   - –°—Ç—ñ–π–∫—ñ—Å—Ç—å –¥–æ –ø–æ–º–∏–ª–æ–∫ –∑–∞–≤–¥—è–∫–∏ `try-catch` —É –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ—è—Ö.  
   - –û–±—Ä–æ–±–∫–∞ –Ω–µ–ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫ (`uncaughtException`, `unhandledRejection`) –¥–ª—è –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏.  
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Å—ñ—ó —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ –∑–±–æ—è—Ö.  
   - –î–æ 5 –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —Å–ø—Ä–æ–± —ñ–∑ –∑–∞—Ç—Ä–∏–º–∫–æ—é 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –Ω–æ–º–µ—Ä—ñ–≤ –≤—ñ–¥ ASP.NET.

---

## üìÇ –û—Å–Ω–æ–≤–Ω—ñ —Ñ–∞–π–ª–∏

- `index.js` ‚Äì –æ—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª —ñ–∑ –ª–æ–≥—ñ–∫–æ—é —Å–µ—Ä–≤–µ—Ä–∞, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—î—é –∫–ª—ñ—î–Ω—Ç—ñ–≤ WhatsApp, –æ–±—Ä–æ–±–∫–æ—é –∑–∞–ø–∏—Ç—ñ–≤ —ñ –ø–æ–¥—ñ–π.  
- `logger.js` ‚Äì –º–æ–¥—É–ª—å –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —Ä—ñ–∑–Ω–∏—Ö —Ä—ñ–≤–Ω—ñ–≤ (Info, Warning, Error —Ç–æ—â–æ) —Ç–∞ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º –≤–∏–≤–µ–¥–µ–Ω–Ω—è–º.  
- `package.json` ‚Äì —Ñ–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏, –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏ —Ç–∞ —Å–∫—Ä–∏–ø—Ç–∞–º–∏.  
- `.env` ‚Äì —Ñ–∞–π–ª –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞.

---

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏

1. **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Node.js —ñ npm**  
   - –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Node.js (—Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤–µ—Ä—Å—ñ—è 16.x –∞–±–æ –Ω–æ–≤—ñ—à–∞) —Ç–∞ npm.  
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:  
     ```bash
     node -v && npm -v
     ```

2. **–ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É**  
   - –°–∫–ª–æ–Ω—É–π—Ç–µ –∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –ø—Ä–æ—î–∫—Ç —É –ª–æ–∫–∞–ª—å–Ω—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó.

3. **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π**  
   - –£ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –ø—Ä–æ—î–∫—Ç—É –≤–∏–∫–æ–Ω–∞–π—Ç–µ:  
     ```bash
     npm install
     ```
   - –¶–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑ `package.json`.

4. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (`.env`)**  
   - –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É.  
   - –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ:  
     - `BASE_URL=http://your-asp-net-server:port` ‚Äì –∞–¥—Ä–µ—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –¥–∞–Ω–∏—Ö.  
     - `LOG_DIR=Logs` ‚Äì –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è –¥–ª—è –ª–æ–≥—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `Logs`).  
     - `PORT=3000` ‚Äì –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `http://localhost:3000`).

5. **–ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–∏**  
   - –í–∏–∫–æ–Ω–∞–π—Ç–µ:  
     ```bash
     node index.js
     ```
   - –£ –∫–æ–Ω—Å–æ–ª—ñ –∑‚Äô—è–≤–∏—Ç—å—Å—è:  
     ```
     [2025-05-24 08:43] [INFO] WhatsApp Multi Session Server –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—ñ 3000
     ```

6. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ASP.NET**  
   - –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –µ–Ω–¥–ø–æ—ñ–Ω—Ç `/whatsapp?handler=RegisteredPhones` –¥–ª—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É –Ω–æ–º–µ—Ä—ñ–≤.  
   - –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –≤–µ–±—Ö—É–∫ `/whatsappwebhook` –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤—Ö—ñ–¥–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.  
   - –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –µ–Ω–¥–ø–æ—ñ–Ω—Ç `/whatsapp?handler=NotifyAuthSuccess` –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é.

---

## üì¶ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –º–æ–¥—É–ª—ñ

–ü—Ä–æ–≥—Ä–∞–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–∞—Å—Ç—É–ø–Ω—ñ –º–æ–¥—É–ª—ñ Node.js (–∑ `package.json`):

1. **`dotenv` (v16.5.0)**  
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —ñ–∑ `.env` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `BASE_URL`, `LOG_DIR`, `PORT`).

2. **`express` (v5.1.0)**  
   - –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è HTTP-—Å–µ—Ä–≤–µ—Ä–∞, –æ–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `/registerwhatsapp`, `/sendmsg`).

3. **`whatsapp-web.js` (v1.28.0)**  
   - –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ WhatsApp (—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è, –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è, –æ–±–º—ñ–Ω –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏).

4. **`qrcode` (v1.5.4)**  
   - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è QR-–∫–æ–¥—ñ–≤ —É —Ñ–æ—Ä–º–∞—Ç—ñ Data URL –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó.

5. **`fs-extra` (v11.3.0)**  
   - –†–æ–∑—à–∏—Ä–µ–Ω–∏–π –º–æ–¥—É–ª—å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Ñ–∞–π–ª–æ–≤–æ—é —Å–∏—Å—Ç–µ–º–æ—é (—Å–µ—Å—ñ—ó, –∫–µ—à, –º–µ–¥—ñ–∞).

6. **`node-fetch` (v2.7.0)**  
   - –í–∏–∫–æ–Ω–∞–Ω–Ω—è HTTP-–∑–∞–ø–∏—Ç—ñ–≤ –¥–æ ASP.NET.

7. **`chalk` (v4.1.2)**  
   - –ö–æ–ª—å–æ—Ä–æ–≤–µ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—ñ–≤ —É –∫–æ–Ω—Å–æ–ª—ñ.

8. **`body-parser` (v2.2.0)**  
   - –ü–∞—Ä—Å–∏–Ω–≥ JSON —É –∑–∞–ø–∏—Ç–∞—Ö —á–µ—Ä–µ–∑ `express`.

9. **`form-data` (v4.0.2)**  
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ multipart/form-data (–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ –∫–æ–¥—ñ).

10. **`qrcode-terminal` (v0.12.0)**  
    - –í–∏–≤–µ–¥–µ–Ω–Ω—è QR-–∫–æ–¥—ñ–≤ —É —Ç–µ—Ä–º—ñ–Ω–∞–ª (–Ω–µ –∑–∞–¥—ñ—è–Ω–æ).

11. **`ws` (v8.18.2)**  
    - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ WebSocket (–º–æ–∂–ª–∏–≤–æ, –¥–ª—è `whatsapp-web.js`).

12. **`logger.js`**  
    - –í–ª–∞—Å–Ω–∏–π –º–æ–¥—É–ª—å –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —Ä—ñ–≤–Ω—ñ–≤ (Info, Warning, Error, Success, Debug, Important) —ñ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º —É —Ñ–∞–π–ª–∏.

---

 –ì–∞—Ä–Ω–æ–≥–æ –¥–Ω—è! ‚òÄÔ∏è (–°—å–æ–≥–æ–¥–Ω—ñ 10:21 AM EEST, –ø–æ–Ω–µ–¥—ñ–ª–æ–∫, 26 —Ç—Ä–∞–≤–Ω—è 2025 —Ä–æ–∫—É.)